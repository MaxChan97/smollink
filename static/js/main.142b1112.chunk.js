(this["webpackJsonpurl-shortener"]=this["webpackJsonpurl-shortener"]||[]).push([[0],{257:function(e,t,n){},258:function(e,t,n){},265:function(e,t){},267:function(e,t){},277:function(e,t){},279:function(e,t){},306:function(e,t){},307:function(e,t){},312:function(e,t){},314:function(e,t){},321:function(e,t){},340:function(e,t){},443:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),o=n(53),r=n.n(o),s=(n(257),n(258),n(17)),l=n(31),a=n.n(l),d=n(62),u=n(5),j=n(464),p=n(459),h=n(466),b=n(469),f=n(460),x=n(463),O=n.p+"static/media/TypingIcon.86aae574.svg",g=n.p+"static/media/CustomizeIcon.b945da33.svg",m=n(152),y=n.n(m),w=n(57),k=n(151),v=n(78);n(444),n(445);v.a.initializeApp({apiKey:"AIzaSyDNoIUkXecqpwOlZFey_sDA9glGlTv0bO4",authDomain:"url-shortener-afee5.firebaseapp.com",projectId:"url-shortener-afee5",storageBucket:"url-shortener-afee5.appspot.com",messagingSenderId:"142883085716",appId:"1:142883085716:web:dcc694084c575807c04381",measurementId:"G-FD5VYNSL7Z"});var C=v.a.firestore(),S=n(95),U=n(468),L=n(46),T=n(467),R=n(457),E=n(4);function D(e){var t=e.originalURL,n=e.smollink,i=Object(R.a)(n),c=i.hasCopied,o=i.onCopy;return Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column",paddingTop:"8px"},children:[Object(E.jsx)("h4",{style:{fontWeight:"bold"},children:"Original URL:"}),Object(E.jsx)("h5",{children:t}),Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(E.jsx)("h4",{style:{fontWeight:"bold"},children:"smollink:"}),Object(E.jsx)(h.a,{onClick:o,ml:2,size:"xs",children:c?"Copied":"Copy"})]}),Object(E.jsx)("h5",{children:n}),Object(E.jsx)("hr",{style:{marginTop:"8px"}})]})}function I(e){var t=e.isOpen,n=e.onClose,c=e.smollinkCurrentUser,o=Object(i.useState)([]),r=Object(u.a)(o,2),s=r[0],l=r[1],a=Object(i.useState)(!1),d=Object(u.a)(a,2),j=d[0],p=d[1];return Object(i.useEffect)((function(){!0===t&&(p(!0),C.collection("users").doc(c).collection("createdSmollinks").orderBy("createdAt").get().then((function(e){var t=[];e.forEach((function(e){var n={smollinkAlias:e.id,originalURL:e.data().originalURL};t.unshift(n)})),l(t),console.log(t)})).finally((function(){p(!1)})))}),[t]),Object(E.jsx)("div",{children:Object(E.jsxs)(U.a,{placement:"right",onClose:n,isOpen:t,children:[Object(E.jsx)(L.e,{}),Object(E.jsxs)(U.b,{children:[Object(E.jsx)(L.d,{borderBottomWidth:"1px",children:"My smollinks"}),j?Object(E.jsx)(L.b,{children:Object(E.jsx)(T.a,{})}):Object(E.jsx)(L.b,{style:{paddingTop:"0"},children:0===s.length?Object(E.jsx)("h1",{style:{textAlign:"center"},children:"No smollinks!"}):s.map((function(e,t){var n=window.location.href+e.smollinkAlias;return Object(E.jsx)(D,{originalURL:e.originalURL,smollink:n},t)}))})]})]})})}function A(e){var t;if("https://www."===e.slice(0,12))t=e;else if("https://"===e.slice(0,8)){t="https://www."+e.slice(8)}else if("www."===e.slice(0,4)){t="https://www."+e.slice(4)}else t="https://www."+e;return t}function _(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e.smollinkCurrentUser})),n=Object(i.useState)(""),c=Object(u.a)(n,2),o=c[0],r=c[1],s=Object(i.useState)(""),l=Object(u.a)(s,2),m=l[0],U=l[1],L=Object(i.useState)(!1),T=Object(u.a)(L,2),R=T[0],D=T[1],_=Object(j.a)(),F=_.isOpen,N=_.onOpen,z=_.onClose;function B(){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("smollinks").doc(m).get();case 2:return t=e.sent,e.abrupt("return",t.exists);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return y.a.isURL("https://www.google.com/"+m)}function P(){return(P=Object(d.a)(a.a.mark((function e(){var n,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),n=A(o),!y.a.isURL(n)){e.next=16;break}if(e.t0=""!==m,!e.t0){e.next=9;break}return e.next=8,B();case 8:e.t0=e.sent;case 9:if(!e.t0){e.next=13;break}w.b.error("Custom link inputted is already taken!"),e.next=14;break;case 13:""===m||M()?(i=""!==m?m:Object(k.a)({length:10,type:"url-safe"}),c=v.a.firestore.FieldValue.serverTimestamp,C.collection("smollinks").doc(i).set({originalURL:n,creator:t,createdAt:c()}).then((function(){C.collection("users").doc(t).collection("createdSmollinks").doc(i).set({originalURL:n,createdAt:c()}).then((function(){w.b.success("smollink successfully created!"),r(""),U(""),N()})).catch((function(e){w.b.error("Something went wrong please try again"),console.error("Error writing document: ",e)}))})).catch((function(e){w.b.error("Something went wrong please try again"),console.error("Error writing document: ",e)}))):w.b.error("Custom link inputted is not a valid URL!");case 14:e.next=17;break;case 16:w.b.error("The inputted URL is invalid!");case 17:D(!1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(console.log(t),!t){console.log("new user created");var n=Object(k.a)({length:20,type:"url-safe"});C.collection("users").doc(n).set({}),e({type:"ADD_NEW_USER",payload:n}),t=n}console.log(t)}),[t]),Object(E.jsxs)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"18px"},children:[Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[Object(E.jsx)(p.a,{color:"gray.500",fontSize:"4xl",children:"Welcome to smollink!"}),Object(E.jsx)(h.a,{colorScheme:"teal",variant:"outline",style:{marginTop:"8px"},onClick:N,children:"My smollinks"})]}),Object(E.jsxs)("div",{style:{display:"flex",width:"100%",textAlign:"start",alignItems:"center",paddingTop:"18px",paddingBottom:"10px"},children:[Object(E.jsx)("img",{src:O,alt:"",style:{height:"38px",marginRight:"8px"}}),Object(E.jsx)(p.a,{color:"black.500",fontSize:"lg",children:"Enter a long URL to make a smollink"})]}),Object(E.jsxs)(b.a,{children:[Object(E.jsx)(f.a,{children:"https://www."}),Object(E.jsx)(x.a,{value:o,onChange:function(e){r(e.target.value)},placeholder:"Enter url here"})]}),Object(E.jsxs)("div",{style:{display:"flex",width:"100%",textAlign:"start",alignItems:"center",paddingTop:"18px",paddingBottom:"10px"},children:[Object(E.jsx)("img",{src:g,alt:"",style:{height:"38px",marginRight:"8px"}}),Object(E.jsx)(p.a,{color:"black.500",fontSize:"lg",children:"Customise your link"})]}),Object(E.jsxs)(b.a,{children:[Object(E.jsx)(f.a,{children:window.location.href}),Object(E.jsx)(x.a,{value:m,onChange:function(e){U(e.target.value)},width:"50%",placeholder:"Leave this empty if you do not mind a random link"})]}),Object(E.jsx)("div",{style:{paddingTop:"30px"},children:Object(E.jsx)(h.a,{isLoading:R,loadingText:"Creating",colorScheme:"teal",variant:"solid",onClick:function(){return P.apply(this,arguments)},children:"Create smollink!"})})]}),Object(E.jsx)(I,{isOpen:F,onClose:z,smollinkCurrentUser:t})]})}function F(){var e=Object(s.g)().alias,t=Object(s.f)();return Object(i.useEffect)((function(){Object(d.a)(a.a.mark((function n(){var i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.collection("smollinks").doc(e).get();case 2:(i=n.sent).exists?window.location.href=i.data().originalURL:t.push("/NotFound/NotFound");case 4:case"end":return n.stop()}}),n)})))()}),[e]),""}function N(){var e=Object(s.f)();return Object(E.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"18px"},children:Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"60%"},children:[Object(E.jsx)(p.a,{color:"gray.500",fontSize:"4xl",children:"The page you're looking for does not exist"}),Object(E.jsx)(p.a,{as:"u",color:"blue.500",fontSize:"xl",style:{cursor:"pointer"},onClick:function(){e.push("/")},children:"please click here to return to main page"})]})})}var z=function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)(s.c,{children:[Object(E.jsx)(s.a,{exact:!0,path:"/",component:_}),Object(E.jsx)(s.a,{exact:!0,path:"/:alias",component:F}),Object(E.jsx)(s.a,{component:N})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,470)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),i(e),c(e),o(e),r(e)}))},W=n(89),M=(n(440),n(462)),P=n(49),V=n(237),X=n(155),G=n(238),J=n.n(G),Z=n(239),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,i=t.payload;switch(n){case"ADD_NEW_USER":return i;default:return e}},H=Object(P.b)({smollinkCurrentUser:q}),K={key:"reducer",storage:J.a},Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.c,Q=Object(X.a)(K,H),$=Object(P.d)(Q,Y(Object(P.a)(V.a))),ee=Object(X.b)($);r.a.render(Object(E.jsxs)(c.a.StrictMode,{children:[Object(E.jsx)(w.a,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(E.jsx)(S.a,{store:$,children:Object(E.jsx)(Z.a,{loading:null,persistor:ee,children:Object(E.jsx)(W.a,{children:Object(E.jsx)(M.a,{children:Object(E.jsx)(z,{})})})})})]}),document.getElementById("root")),B()}},[[443,1,2]]]);
//# sourceMappingURL=main.142b1112.chunk.js.map